<h1>Editar Livro</h1>

<form action="/livro/update" method="post">
  <input type="hidden" name="id" value="{{livro._id}}">

  <div class="form-group mb-3">
    <label for="titulo">Título</label>
    <input type="text" id="titulo" name="titulo" class="form-control"
           value="{{livro.titulo}}" required>
  </div>

  <div class="form-group mb-3">
    <label for="editora">Editora</label>
    <input type="text" id="editora" name="editora" class="form-control"
           value="{{livro.editora}}">
  </div>

  <div class="form-group mb-3">
    <label for="ano_publicacao">Ano de Publicação</label>
    <input type="number" id="ano_publicacao" name="ano_publicacao" class="form-control"
           value="{{livro.ano_publicacao}}">
  </div>

  <div class="form-group mb-3">
    <label for="isbn">ISBN</label>
    <input type="text" id="isbn" name="isbn" class="form-control"
           value="{{livro.isbn}}">
  </div>

  <div class="form-group mb-3">
    <label for="categoria">Categoria</label>
    <select id="categoria" name="categoria" class="form-control" required>
      {{#each categorias}}
        <option value="{{this._id}}"
          {{#if (eq this._id ../livro.categoria)}}selected{{/if}}>
          {{this.nome}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="form-group mb-3">
    <label for="autores">Autores</label>
    <select id="autores" name="autores" class="form-control" multiple required>
      {{#each autores}}
        <option value="{{this._id}}"
          {{#if (includes this._id ../livro.autores)}}selected{{/if}}>
          {{this.nome}}
        </option>
      {{/each}}
    </select>
    <small class="form-text text-muted">Segure Ctrl (Windows) ou Cmd (Mac) para selecionar múltiplos.</small>
  </div>

  <div class="form-group mb-3">
    <label for="status">Status</label>
    <select id="status" name="status" class="form-control">
      <option value="disponível" {{#if (eq livro.status 'disponível')}}selected{{/if}}>Disponível</option>
      <option value="emprestado"  {{#if (eq livro.status  'emprestado')}}   selected{{/if}}>Emprestado</option>
    </select>
  </div>

  <button type="submit" class="btn btn-success">Atualizar</button>
</form>
